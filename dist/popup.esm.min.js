class t{baseMaskStyle={width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, .2)",position:"fixed",left:0,top:0,zIndex:"9999"};baseContentBoxStyle={minWidth:"300px",backgroundColor:"#fff",boxShadow:"0 0 2px #999",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)",borderRadius:"10px"};constructor(){this.eventListeners=[],this.mask=document.createElement("div"),this.setStyle(this.mask,this.baseMaskStyle),this.contentBox=document.createElement("div"),this.setStyle(this.contentBox,this.baseContentBoxStyle),this.mask.appendChild(this.contentBox),this.queue=[],this.isShowing=!1}showNext(){if(this.queue.length>0&&!this.isShowing){this.isShowing=!0;this.queue.shift()()}}middleBox(t){this.contentBox.style.cssText="",this.setStyle(this.contentBox,this.baseContentBoxStyle),this.contentBox.innerHTML="";const{title:e="默认标题内容",content:i="弹窗的默认提示信息！",titleBtn:n=!0,closeBtn:o=!0,closeBtnStyle:s={},btnStyle:a={},contentStyle:r={},titleStyle:d={},closePreview:l=()=>{}}=t;if(document.body.appendChild(this.mask),n){this.titleDiv=this.createStyledElement("div",{width:"100%",height:"50px",lineHeight:"50px",paddingLeft:"20px",boxSizing:"border-box",color:"#666",textAlign:"center",...d}),this.titleDiv.innerText=e,this.contentBox.appendChild(this.titleDiv);const t='<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t<path d="M6 6L18 18M18 6L6 18" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n\t\t</svg>',i=new DOMParser;this.closeBtn=i.parseFromString(t,"image/svg+xml").documentElement,this.setStyle(this.closeBtn,{position:"absolute",right:"0",padding:"3vw",width:"24px",top:0,...s}),o&&this.contentBox.appendChild(this.closeBtn),this.addClickListeners([this.closeBtn],()=>{l(),this.close()})}this.content=this.createStyledElement("div",{color:"#666",padding:"0 20px 20px",...r}),this.content.innerHTML=i,this.contentBox.appendChild(this.content)}alert(t){const{btnStyle:e,btns:i,callbacks:n=[]}=t,o={width:"100%",height:"10.677vw",lineHeight:"10.677vw",outline:"none",border:"none",color:"#000",fontSize:"4.266vw",padding:"0 2.4vw",borderTop:"1px solid #ccc",borderRadius:"0 0 2.4vw 2.4vw"};this.middleBox(t),i.length>0&&i.map((t,i)=>{const s=this.createButton(t,e?.[i]||o);this.contentBox.appendChild(s),this.addClickListeners([s],()=>{const t=n?.[i];t&&t(),this.close()})})}tips(t,e,i=[]){const n=e&&"function"==typeof e?e:()=>{};this.middleBox(t);const o=this.createButton("确定",{marginTop:"8vw",outline:"none",border:"none",color:"#fff",fontSize:"4.266vw",borderRadius:"7.2vw",padding:"0 2.667vw",width:"40vw",height:"11.2vw",lineHeight:"11.2vw",backgroundColor:this.changeColor(i)});this.setStyle(this.contentBox,{backgroundColor:"#fff",fontWeight:"700",fontSize:"4.266vw",color:"#F23F3F",lineHeight:"5.8667vw",textAlign:"center",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",outline:"none",border:"none",borderRadius:"2.133vw",padding:"10.66vw 2.667vw 8vw"}),this.contentBox.appendChild(o),this.addClickListeners([o],()=>{n(),this.close()})}showImagePreview({imgUrl:t,color:e,onClose:i,svgIcon:n}){const o=i||(()=>{});this.middleBox({content:"",titleBtn:!1});const s=this.createStyledElement("img",{maxWidth:"100%",maxHeight:"70vh"});s.src=t,this.contentBox.appendChild(s);const a=n||'<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t<path d="M6 6L18 18M18 6L6 18" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n\t\t</svg>',r=(new DOMParser).parseFromString(a,"image/svg+xml").documentElement;this.setStyle(r,{right:"0",padding:"3vw",width:"24px"}),this.setStyle(this.contentBox,{maxWidth:"500px",display:"flex",flexDirection:"column",alignItems:"center"}),this.contentBox.appendChild(r),this.addClickListeners([r],()=>{o(),this.close()})}showBottomPopup(t){const{title:e,content:i,cancelCallbacks:n=()=>{},contentBoxStyle:o={},contentStyle:s={},titleStyle:a={},closeBtnStyle:r={},svgStyle:d={},btns:l=[],btnStyle:h=[],addEventListener:c=()=>{},callbacks:x=[()=>{}]}=t;this.middleBox({content:i,title:e}),this.setStyle(this.contentBox,{position:"absolute",bottom:0,top:"auto",left:0,maxHeight:"80vh",transform:"none",borderRadius:"10px 10px 0 0",width:"100vw",maxWidth:"500px",flex:1,display:"flex",flexDirection:"column",...o}),this.setStyle(this.content,{boxSizing:"border-box",overflowY:"auto",overflowX:"hidden",borderRadius:"10px 10px 0 0",width:"100%",flex:1,padding:"0 5vw, 5vw",display:"flex",flexDirection:"column",fontSize:"4vw",...s}),this.setStyle(this.titleDiv,{fontSize:"5vw",...a}),this.setStyle(this.closeBtn,{color:"#000",closeBtnStyle:r}),this.addClickListeners([this.closeBtn],()=>{closePreview(),this.close()});const p={width:"100%",height:"40px",lineHeight:"40px",outline:"none",border:"none",color:"#000",fontSize:"16px",padding:"0 10px",borderTop:"1px solid #ccc",borderRadius:"0 0 10px 10px"};l.length>0&&l.map((t,e)=>{const i=this.createButton(t,h?.[e]||p);this.contentBox.appendChild(i),this.addClickListeners([i],()=>{const t=x?.[e];t&&t(),this.close.bind(this)})}),c()}changeColor(t){return Array.isArray(t)&&0!==t.length?1===t.length?t[0]:`linear-gradient(${t[0]} 0%, ${t[1]} 100%), ${t[1]}`:"#fff"}confirm(t,e,i,n){this.middleBox(t),this.setStyle(this.contentBox,{backgroundColor:"#fff",borderRadius:"8px",paddingLeft:"0"});const o={btn:["确定","取消"]},s=i&&"function"==typeof i?i:()=>{},a=n&&"function"==typeof n?n:()=>{};e&&"object"==typeof e&&Object.assign(o,e);const r=this.createStyledElement("div",{padding:"20px",display:"flex",justifyContent:"flex-end"});this.contentBox.appendChild(r);const d=this.createButton(o.btn[0],{marginLeft:"0",background:this.changeColor(e.color)}),l=this.createButton(o.btn[1],{marginLeft:"10px",outline:"none",border:"1px solid #ccc",color:"#666",background:"transparent"});r.appendChild(d),r.appendChild(l),this.addClickListeners([d],()=>{s(),this.close()}),this.addClickListeners([l],()=>{a(),this.close()})}msg(t,e){this.queue.push(()=>{this.contentBox.innerHTML="";let i="默认提示内容",n={time:1e3};"string"==typeof t&&(i=t),e&&"object"==typeof e&&Object.assign(n,e),document.body.appendChild(this.mask),this.setStyle(this.contentBox,{width:"auto",backgroundColor:"rgb(255, 255, 255)",boxShadow:"0 0 2px #999",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)",borderRadius:"3px",padding:"0 30px 0",color:"#666"});const o=this.createStyledElement("span"),s=this.createStyledElement("p",{});1===n.icon?(o.innerText="√",this.setStyle(o,{border:"3px solid rgb(56, 201, 177)",color:"rgb(56, 201, 177)",width:"30px",height:"30px",borderRadius:"50%",display:"inline-block",lineHeight:"30px",textAlign:"center",margin:"0 10px",fontSize:"20px",fontWeight:"bold"})):0===n.icon?(o.innerText="×",this.setStyle(o,{width:"30px",height:"30px",border:"3px solid rgb(233, 91, 76)",color:"rgb(233, 91, 76)",borderRadius:"50%",display:"inline-block",lineHeight:"30px",textAlign:"center",margin:"0 10px",fontSize:"20px",fontWeight:"bold"})):(o.innerText="",this.setStyle(this.contentBox,{width:"auto",height:"auto",maxWidth:"90vw",minWidth:"280px",backgroundColor:"rgba(0, 0, 0, 0.5)",boxShadow:"0 0 2px #999",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",borderRadius:"3px",padding:"10px 30px",color:"#fff",wordWrap:"break-word",textAlign:"center"})),this.contentBox.appendChild(o),this.contentBox.appendChild(s),s.innerHTML=i,this.timer=setTimeout(()=>{this.close(n.time,`msg:${t}`)},n.time)}),this.isShowing||this.showNext()}load=(t={})=>{this.queue.push(()=>{this.contentBox.innerHTML="",document.body.appendChild(this.mask),this.setStyle(this.contentBox,{border:"none",boxShadow:"0 0 0 transparent",backgroundColor:"transparent",display:"flex",justifyContent:"center",alignItems:"center",height:"100%",width:"100%",zIndex:"9999"});let e={width:100,height:100,color:"#201c1d"};e={...e,...t};const i=e.width-e.height>0?e.width:e.height,{color:n}=e,o=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"  preserveAspectRatio="xMidYMid" width="${i}" height="${i}" style="shape-rendering: auto; display: block;">\n      <g data-idx="1">\n        <rect fill="${n}" height="12" width="6" ry="6" rx="3" y="24" x="47" data-idx="3" opacity="0" >\n          <animate attributeName="opacity" values="1;0;" dur="1.1s" begin="0s" repeatCount="indefinite" />\n        </rect>\n      </g>\n      <g transform="matrix(0.8660254037844387,0.49999999999999994,-0.49999999999999994,0.8660254037844387,31.698729810778058,-18.30127018922194)" data-idx="5">\n        <rect fill="${n}" height="12" width="6" ry="6" rx="3" y="24" x="47" data-idx="6" opacity="0">\n          <animate attributeName="opacity" values="1;0;" dur="1.1s" begin="0.1s" repeatCount="indefinite" />\n        </rect>\n      </g>\n      <g transform="matrix(0.5000000000000001,0.8660254037844386,-0.8660254037844386,0.5000000000000001,68.30127018922192,-18.30127018922194)" data-idx="8">\n        <rect fill="${n}" height="12" width="6" ry="6" rx="3" y="24" x="47" data-idx="9" opacity="0">\n          <animate attributeName="opacity" values="1;0;" dur="1.1s" begin="0.2s" repeatCount="indefinite" />\n        </rect>\n      </g>\n      <g transform="matrix(6.123233995736766e-17,1,-1,6.123233995736766e-17,100,0)" data-idx="11">\n        <rect fill="${n}" height="12" width="6" ry="6" rx="3" y="24" x="47" data-idx="12" opacity="0">\n          <animate attributeName="opacity" values="1;0;" dur="1.1s" begin="0.3s" repeatCount="indefinite" />\n        </rect>\n      </g>\n      <g transform="matrix(-0.4999999999999998,0.8660254037844387,-0.8660254037844387,-0.4999999999999998,118.30127018922192,31.69872981077805)" data-idx="14">\n        <rect fill="${n}" height="12" width="6" ry="6" rx="3" y="24" x="47" data-idx="15" opacity="0">\n          <animate attributeName="opacity" values="1;0;" dur="1.1s" begin="0.4s" repeatCount="indefinite" />\n        </rect>\n      </g>\n      <g transform="matrix(-0.8660254037844387,0.49999999999999994,-0.49999999999999994,-0.8660254037844387,118.30127018922194,68.30127018922194)" data-idx="17">\n        <rect fill="${n}" height="12" width="6" ry="6" rx="3" y="24" x="47" data-idx="18" opacity="0">\n          <animate attributeName="opacity" values="1;0;" dur="1.1s" begin="0.5s" repeatCount="indefinite" />\n        </rect>\n      </g>\n      <g transform="matrix(-1,1.2246467991473532e-16,-1.2246467991473532e-16,-1,100,100)" data-idx="20">\n        <rect fill="${n}" height="12" width="6" ry="6" rx="3" y="24" x="47" data-idx="21" opacity="0">\n          <animate attributeName="opacity" values="1;0;" dur="1.1s" begin="0.6s" repeatCount="indefinite" />\n        </rect>\n      </g>\n      <g transform="matrix(-0.8660254037844386,-0.5000000000000001,0.5000000000000001,-0.8660254037844386,68.30127018922192,118.30127018922194)" data-idx="23">\n        <rect fill="${n}" height="12" width="6" ry="6" rx="3" y="24" x="47" data-idx="24" opacity="0">\n          <animate attributeName="opacity" values="1;0;" dur="1.1s" begin="0.7s" repeatCount="indefinite" />\n        </rect>\n      </g>\n      <g transform="matrix(-0.5000000000000004,-0.8660254037844385,0.8660254037844385,-0.5000000000000004,31.698729810778097,118.30127018922195)" data-idx="26">\n        <rect fill="${n}" height="12" width="6" ry="6" rx="3" y="24" x="47" data-idx="27" opacity="0">\n          <animate attributeName="opacity" values="1;0;" dur="1.1s" begin="0.8s" repeatCount="indefinite" />\n        </rect>\n      </g>\n      <g transform="matrix(-1.8369701987210297e-16,-1,1,-1.8369701987210297e-16,7.105427357601002e-15,100)" data-idx="29">\n        <rect fill="${n}" height="12" width="6" ry="6" rx="3" y="24" x="47" data-idx="30" opacity="0">\n          <animate attributeName="opacity" values="1;0;" dur="1.1s" begin="0.9s" repeatCount="indefinite" />\n        </rect>\n      </g>\n      <g transform="matrix(0.5000000000000001,-0.8660254037844386,0.8660254037844386,0.5000000000000001,-18.30127018922194,68.30127018922192)" data-idx="32">\n        <rect fill="${n}" height="12" width="6" ry="6" rx="3" y="24" x="47" data-idx="33" opacity="0">\n          <animate attributeName="opacity" values="1;0;" dur="1.1s" begin="1.0s" repeatCount="indefinite"/>\n        </rect>\n      </g>\n      <g transform="matrix(0.8660254037844384,-0.5000000000000004,0.5000000000000004,0.8660254037844384,-18.30127018922194,31.698729810778104)" data-idx="35">\n        <rect fill="${n}" height="12" width="6" ry="6" rx="3" y="24" x="47" data-idx="36" opacity="0">\n          <animate attributeName="opacity" values="1;0;" dur="1.1s" begin="1.1s" repeatCount="indefinite" />\n        </rect>\n      </g>\n      <g data-idx="38"></g>\n    </svg>`,s=(new DOMParser).parseFromString(o,"image/svg+xml").documentElement;this.contentBox.appendChild(s)}),this.isShowing||this.showNext()};close(t=""){this.mask.parentElement&&(document.body.removeChild(this.mask),this.contentBox.innerHTML=""),this.isShowing=!1,this.showNext(),this.removeEventListeners()}debounce(t,e,i){let n;return function(...o){const s=this,a=i&&!n;clearTimeout(n),n=setTimeout(()=>{n=null,i||t.apply(s,o)},e),a&&t.apply(s,o)}}setStyle(t,e){Object.assign(t.style,e)}createStyledElement(t,e){const i=document.createElement(t);return this.setStyle(i,e),i}createButton(t,e={}){const i=this.createStyledElement("button",{backgroundColor:"#fff",outline:"none",border:"none",color:"#fff",fontSize:"16px",borderRadius:"2px",padding:"0 15px",height:"30px",lineHeight:"30px",...e});return i.innerText=t,i}addClickListeners(t,e){t.forEach(t=>{t.addEventListener("click",e),this.eventListeners.push({element:t,callback:e})})}removeEventListeners(){this.eventListeners.forEach(({element:t,callback:e})=>{t.removeEventListener("click",e)}),this.eventListeners=[]}}export{t as default};
